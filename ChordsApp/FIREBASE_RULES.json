{
  "rules": {
    "users": {
      "$uid": {
        // Subscription data - Can CREATE if doesn't exist, but can't UPDATE
        "subscription": {
          ".read": "$uid === auth.uid",
          ".write": "$uid === auth.uid && !data.exists()"
        },

        // Usage data - Can CREATE if doesn't exist, but can't UPDATE
        "usage": {
          ".read": "$uid === auth.uid",
          ".write": "$uid === auth.uid && !data.exists()"
        },

        // Bonus analyses - Server only (for giving away free analyses)
        "bonusAnalyses": {
          ".read": "$uid === auth.uid",
          ".write": false
        },

        // Songs - Users can read/write their own songs
        "songs": {
          ".read": "$uid === auth.uid",
          ".write": "$uid === auth.uid",
          "$songId": {
            ".validate": "newData.hasChildren(['name', 'content', 'createdAt'])"
          }
        }
      }
    }
  }
}
