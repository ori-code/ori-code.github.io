var we=Object.defineProperty;var xe=(i,e,t)=>e in i?we(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var B=(i,e,t)=>xe(i,typeof e!="symbol"?e+"":e,t);import{d as re,g as H,r as j,t as X,u as L,b as de,a as R,i as S,s as J,e as Ge}from"./web.C_sbr3PP.js";import{B as Q}from"./components.Ddpn2dxW.js";import{c as q,a as E,o as ge,d as F,e as K,b as _,n as Me,F as Be}from"./solid.FlMzgGMJ.js";import{c as Se}from"./store.Dav5xYq4.js";import{u as ae}from"./user-info.B8flXjSH.js";function qe(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const U=140,We=.7,se=.18;class O{constructor(e,t){B(this,"start");B(this,"end");this.start=e,this.end=t}len(){return Math.abs(this.end-this.start)}expand(e){this.start=Math.min(this.start,e),this.end=Math.max(this.end,e)}withMul(e){return new O(this.start*e,this.end*e)}}class Ze extends ImageData{setPixel(e,t,a){const s=(t*this.width+e)*4;s>=this.data.length||(this.data[s]=Math.floor(a.red*255),this.data[s+1]=Math.floor(a.green*255),this.data[s+2]=Math.floor(a.blue*255),this.data[s+3]=Math.floor((a.alpha!==void 0?a.alpha:1)*255))}}function Pe(i){const e=new $e;e.setSampleRate(i.sampleRate),e.setQ(Math.SQRT1_2),e.setFrequency(1e3);const t=i.getChannelData(0),a=i.getChannelData(1),s=[];for(let n=0;n<i.length;n++){let l;if(i.numberOfChannels===2){const f=t[n],g=a[n];l=f<0?Math.min(f,g):Math.max(f,g)}else l=t[n];const[d,c]=e.processMultimode(l);s.push([d,c])}return s}function Re(i,e){const t=Pe(i),a=i.length/e,s=[];for(let n=0;n<e;n++){const l=new O(0,0),d=new O(0,0),c=Math.floor(n*a),f=Math.ceil(Math.min((n+1)*a,i.length));for(let g=c;g<f;g++){const[I,b]=t[g];l.expand(I),d.expand(b)}s.push([l,d])}return s}function He(i,e,t){i=i%360,i/=360;let a,s,n;{const l=(f,g,I)=>(I<0&&(I+=1),I>1&&(I-=1),I<.16666666666666666?f+(g-f)*6*I:I<.5?g:I<.6666666666666666?f+(g-f)*(.6666666666666666-I)*6:f),d=t*(1+e),c=2*t-d;a=l(c,d,i+1/3),s=l(c,d,i),n=l(c,d,i-1/3)}return{red:a,green:s,blue:n}}class $e{constructor(){B(this,"sampleRate");B(this,"q");B(this,"frequency");B(this,"ic1eq");B(this,"ic2eq");B(this,"g");B(this,"k");this.sampleRate=44100,this.q=Math.SQRT1_2,this.frequency=1e3,this.ic1eq=0,this.ic2eq=0,this.g=0,this.k=0,this.updateCoefficients()}setSampleRate(e){this.sampleRate=e,this.updateCoefficients()}setQ(e){this.q=e,this.updateCoefficients()}setFrequency(e){this.frequency=e,this.updateCoefficients()}updateCoefficients(){const e=1/this.sampleRate,t=2*Math.PI*this.frequency,a=2/e*Math.tan(t*e/2);this.g=a*e/2,this.k=1/this.q}processMultimode(e){const t=(e-this.ic2eq-this.k*this.ic1eq)/(1+this.g*(this.g+this.k)),a=this.g*t+this.ic1eq,s=this.g*a+this.ic2eq;this.ic1eq=2*a-this.ic1eq,this.ic2eq=2*s-this.ic2eq;const n=s,l=e-this.k*a-s;return[n,l,a]}}function Xe(i,e,t){return{red:i.red*(1-t)+e.red*t,green:i.green*(1-t)+e.green*t,blue:i.blue*(1-t)+e.blue*t}}function oe(i,e){return{red:i.red,green:i.green,blue:i.blue,alpha:e}}function Ve(i,e,t,a){const s=t*.5,n=new Ze(e,t);for(let g=0;g<e;g++)n.setPixel(g,Math.floor(s),{red:.5,green:.5,blue:.5,alpha:.5});let l={red:0,green:0,blue:0},d=0,c=0;const f=Re(i,e);for(let g=0;g<f.length;g++){let[I,b]=f[g];I=I.withMul(a),b=b.withMul(a);const G=I.len()+b.len(),M=l;if(G>0){const C=I.len()/G,y=b.len()/G,o=U-U*C+U*y,A=He(o,.3,.45);g>0?l=Xe(l,A,1-We):l=A}const m=Math.max(I.end,b.end),w=Math.min(I.start,b.start),r=d,u=c,h=Math.round(s+w*s);d=h<d||g===0?h:d+(h-d)*se;const p=Math.min(Math.round(s+m*s),t);if(c=p>=c||g===0?p:c-(c-p)*se,g>0){let C=Math.floor(Math.min(u,c)),y=Math.ceil(Math.max(u,c));for(let o=C;o<y;o++){const A=(y-o)/(y-C);n.setPixel(g-1,t-o,oe(M,A))}C=Math.floor(Math.min(r,d)),y=Math.ceil(Math.max(r,d));for(let o=C;o<y;o++){const A=1-(y-o)/(y-C);n.setPixel(g-1,t-o,oe(M,A))}}for(let C=Math.floor(d);C<Math.ceil(c);C++)n.setPixel(g,t-C,l)}return n}var ke=X('<div class=waveform-container><canvas title="Waveform image"></canvas><svg style=position:relative; viewBox="-1 0 1001 90"><line class=cursor x1=0 y1=5 x2=0 y2=85 stroke-width=1></line><line x1=0 y1=5 x2=0 y2=85 stroke=#1c2d3a stroke-width=2px>');const D={};function _e(i){let e,t,a,s,n=0,l=!1;const d=1e3,c=90,[f,g]=q(!1),[I,b]=q(),G=r=>{r.target.classList.contains("remove-loop-button")?l=!0:n=r.offsetX/e.getBoundingClientRect().width},M=r=>{if(l){l=!1;return}n!==null&&i.setStartPosition(n)},m=r=>{const u=e==null?void 0:e.getBoundingClientRect(),h="".concat(100*(r.clientX-u.left)/u.width,"%");a.setAttribute("x1",h),a.setAttribute("x2",h)},w=()=>{if(t&&i.getPlayheadPosition){const r="".concat((i.getPlayheadPosition()||0)*100,"%");t.setAttribute("x1",r),t.setAttribute("x2",r)}requestAnimationFrame(w)};return E(async()=>{if(i.url)if(i.url in D)b(D[i.url]);else{const u=await(await fetch(i.url)).arrayBuffer();i.audioCtx.decodeAudioData(u,h=>{s.width=d*window.devicePixelRatio,s.height=c*window.devicePixelRatio,D[i.url]=Ve(h,s.width,s.height,1),b(D[i.url])})}}),E(()=>{const r=I();if(r){const u=s.getContext("2d");u.clearRect(0,0,s.width,s.height),u.fillStyle="red",u.fillRect(0,0,100,100),u.putImageData(r,0,0)}}),ge(()=>{w(),window.addEventListener("mouseup",r=>{})}),(()=>{var r=H(ke),u=r.firstChild,h=u.nextSibling,p=h.firstChild,C=p.nextSibling,y=s;typeof y=="function"?L(y,u):s=u,h.$$mouseup=M,h.$$mousedown=G,h.$$mousemove=m,h.addEventListener("mouseleave",()=>g(!1)),h.addEventListener("mouseenter",()=>g(!0));var o=e;typeof o=="function"?L(o,h):e=h;var A=a;typeof A=="function"?L(A,p):a=p;var x=t;return typeof x=="function"?L(x,C):t=C,F(()=>de(p,"stroke",f()?"#39576f":"transparent")),j(),r})()}re(["mousemove","mousedown","mouseup"]);function Ne(i,e,t){var a;document.hidden!==void 0?a={hidden:"hidden",visibilitychange:"visibilitychange"}:document.webkitHidden!==void 0?a={hidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"}:document.mozHidden!==void 0?a={hidden:"mozHidden",visibilitychange:"mozvisibilitychange"}:document.msHidden!==void 0&&(a={hidden:"msHidden",visibilitychange:"msvisibilitychange"});function s(o,A,x,N,z){for(var Z=0;Z<A.length;++Z)o.addEventListener(A[Z],x,{capture:N,passive:z})}function n(o,A,x,N,z){for(var Z=0;Z<A.length;++Z)o.removeEventListener(A[Z],x,{capture:N,passive:z})}function l(){}var d=navigator.userAgent.toLowerCase(),c=d.indexOf("iphone")>=0&&d.indexOf("like iphone")<0||d.indexOf("ipad")>=0&&d.indexOf("like ipad")<0||d.indexOf("ipod")>=0&&d.indexOf("like ipod")<0||d.indexOf("mac os x")>=0&&navigator.maxTouchPoints>0,f=!0;function g(){var o=!!((!a||!document[a.hidden])&&(!c||document.hasFocus()));o!==f&&(f=o,u(!1),G())}function I(){g()}a&&s(document,[a.visibilitychange],I,!0,!0);function b(o){o&&o.target!==window||g()}c&&s(window,["focus","blur"],b,!0,!0);function G(){if(f){if(i.state!=="running"&&i.state!=="closed"&&C){var o=i.resume();o&&o.then(l,l).catch(l)}}else if(i.state==="running"){var o=i.suspend();o&&o.then(l,l).catch(l)}}function M(o){(!o||!o.unmute_handled)&&(o.unmute_handled=!0,G())}s(i,["statechange"],M,!0,!0),i.onstatechange||(i.onstatechange=M);var m=null;function w(o,A){for(var x=A;o>1;o--)x+=A;return x}var r="data:audio/mpeg;base64,//uQx"+w(23,"A")+"WGluZwAAAA8AAAACAAACcQCA"+w(16,"gICA")+w(66,"/")+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+w(320,"A")+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+w(15,"/")+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+w(18,"/")+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+w(97,"V")+"Q==";function u(o){if(c)if(f){if(o){if(!m){var A=document.createElement("div");A.innerHTML="<audio x-webkit-airplay='deny'></audio>",m=A.children.item(0),m.controls=!1,m.disableRemotePlayback=!0,m.preload="auto",m.src=r,m.loop=!0,m.load()}if(m.paused){var x=m.play();x&&x.then(l,h).catch(h)}}}else h()}function h(){m&&(m.src="about:blank",m.load(),m=null)}var p=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],C=!1;function y(){C=!0,u(!0),G()}return s(window,p,y,!0,!0),{dispose:function(){h(),a&&n(document,[a.visibilitychange],I,!0,!0),c&&n(window,["focus","blur"],b,!0,!0),n(window,p,y,!0,!0),n(i,["statechange"],M,!0,!0),i.onstatechange===M&&(i.onstatechange=null)}}}var ze=X('<div tabindex=0 class="toggle text-nowrap d-inline-block ms-4"><svg viewBox="0 0 10 10"><circle cx=5 cy=5 r=3.8 fill=transparent stroke=currentColor stroke-width=1.2></circle><!$><!/></svg><!$><!/>'),Le=X("<svg><circle cx=5 cy=5 r=2 fill=currentColor></svg>",!1,!0),Ke=X('<svg xmlns=http://www.w3.org/2000/svg width=40 height=40 fill=none viewBox="0 0 40 40"><path fill=var(--gray-0) d="M19.991 39.983c11.041 0 19.992-8.95 19.992-19.992C39.983 8.951 31.033 0 19.99 0 8.951 0 0 8.95 0 19.991s8.95 19.992 19.991 19.992Z"></path><!$><!/>'),Ee=X('<div class=audio-lab-container><div class=list-selector></div><div class=videos><div class=video-container><video playsinline><source type=video/mp4></video></div><div class="d-flex align-items-center controls my-3"><!$><!/><!$><!/><!$><!/></div><!$><!/><div class="d-md-none d-flex justify-content-between mt-4"><!$><!/><!$><!/></div><h3></h3><p class=description>'),Ye=X("<div class=lab-overlay>Loading preset..."),Te=X("<button class=item>"),De=X('<svg><path fill=var(--body-color) d="M 10 10 L 30 10 L 30 30 L 10 30 Z"></svg>',!1,!0),Fe=X('<svg><path fill=var(--body-color) d="m13.316 10.275 17.737 9.716-17.737 9.734v-19.45Z"></svg>',!1,!0);function Oe(){const i=window.AudioContext||window.webkitAudioContext;try{return new i({latencyHint:"interactive"})}catch(e){return new i}}const Je=ae().getBrowserName()==="Safari"&&ae().getPlatform().type==="mobile",$=Oe();Je&&Ne($);const le=i=>(()=>{var e=H(ze),t=e.firstChild,a=t.firstChild,s=a.nextSibling,[n,l]=R(s.nextSibling),d=t.nextSibling,[c,f]=R(d.nextSibling);return Ge(e,"click",i.onClick,!0),S(t,(()=>{var g=K(()=>!!i.toggled);return()=>g()&&H(Le)})(),n,l),S(e,()=>i.label,c,f),j(),e})();class Qe{constructor(){B(this,"mixerNode",null);B(this,"playhead",0);B(this,"duration",0)}async init(){await $.audioWorklet.addModule(new URL("data:text/javascript;base64,Y2xhc3MgQXVkaW9MYWJNaXhlciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgbGV2ZWxzID0gWzAsIDAsIDBdOwogIGluY3JlbWVudHMgPSBbMCwgMCwgMF07CgogIGlzUGxheWluZyA9IGZhbHNlOwogIHBsYXloZWFkID0gMDsKICBidWZmZXJzID0gW107CiAgbnVtU2FtcGxlcyA9IDA7CgogIG91dHB1dExldmVsID0gMDsKICBvdXRwdXRMZXZlbEluY3JlbWVudCA9IDA7CgogIHN0YXJ0UG9zaXRpb24gPSAwOwoKICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICBzdXBlcihvcHRpb25zKTsKCiAgICB0aGlzLnBvcnQub25tZXNzYWdlID0gZXZlbnQgPT4gewogICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEudHlwZSkgewogICAgICAgIGNhc2UgJ3NldF9idWZmZXJzJzogewogICAgICAgICAgdGhpcy5idWZmZXJzID0gZXZlbnQuZGF0YS5idWZmZXJzOwogICAgICAgICAgdGhpcy5udW1TYW1wbGVzID0gTWF0aC5taW4oLi4udGhpcy5idWZmZXJzLm1hcChiID0+IGJbMF0ubGVuZ3RoKSk7CiAgICAgICAgICBmb3IgKGNvbnN0IGIgb2YgdGhpcy5idWZmZXJzKSB7CiAgICAgICAgICAgIGJbMF0gPSBiWzBdLnNsaWNlKDAsIHRoaXMubnVtU2FtcGxlcyk7CiAgICAgICAgICAgIGJbMV0gPSBiWzFdLnNsaWNlKDAsIHRoaXMubnVtU2FtcGxlcyk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY2FzZSAnc2V0X2xldmVscyc6IHsKICAgICAgICAgIHRoaXMuaW5jcmVtZW50cyA9IGV2ZW50LmRhdGEubGV2ZWxzLm1hcCgobCwgaSkgPT4gdGhpcy5nZXRGYWRlSW5jcmVtZW50KGwgLSB0aGlzLmxldmVsc1tpXSwgMC4wMikpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgJ3NldF9wb3NpdGlvbic6IHsKICAgICAgICAgIHRoaXMucGxheWhlYWQgPSBNYXRoLmZsb29yKGV2ZW50LmRhdGEucG9zaXRpb24gKiBzYW1wbGVSYXRlKTsKICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7IHBsYXloZWFkOiB0aGlzLnBsYXloZWFkIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgJ3BsYXknOiB7CiAgICAgICAgICB0aGlzLnN0YXJ0UG9zaXRpb24gPSBldmVudC5kYXRhLnBvc2l0aW9uICogc2FtcGxlUmF0ZTsKICAgICAgICAgIHRoaXMucGxheWhlYWQgPSBNYXRoLmZsb29yKHRoaXMuc3RhcnRQb3NpdGlvbik7CiAgICAgICAgICB0aGlzLm91dHB1dExldmVsSW5jcmVtZW50ID0gdGhpcy5nZXRGYWRlSW5jcmVtZW50KDEgLSB0aGlzLm91dHB1dExldmVsLCAwLjAyKTsKICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlICdwYXVzZSc6IHsKICAgICAgICAgIHRoaXMub3V0cHV0TGV2ZWxJbmNyZW1lbnQgPSB0aGlzLmdldEZhZGVJbmNyZW1lbnQoMCAtIHRoaXMub3V0cHV0TGV2ZWwsIDAuMDIpOwogICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7IHBsYXloZWFkOiB0aGlzLnN0YXJ0UG9zaXRpb24gfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKICBnZXRGYWRlSW5jcmVtZW50KGRlbHRhLCB0aW1lSW5TZWNvbmRzKSB7CiAgICByZXR1cm4gZGVsdGEgLyAodGltZUluU2Vjb25kcyAqIHNhbXBsZVJhdGUpOwogIH0KCiAgcHJvY2VzcyhpbnB1dHMsIG91dHB1dHMpIHsKICAgIGlmICghdGhpcy5idWZmZXJzLmxlbmd0aCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGNvbnN0IGJsb2NrU2l6ZSA9IG91dHB1dHNbMF1bMF0ubGVuZ3RoOwogICAgZm9yIChsZXQgcyA9IDA7IHMgPCBibG9ja1NpemU7IHMrKykgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnVmZmVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGNoID0gMDsgY2ggPCAyOyBjaCsrKSB7CiAgICAgICAgICBjb25zdCBzYW1wbGVQb3NpdGlvbiA9IHRoaXMucGxheWhlYWQgKyBzOwogICAgICAgICAgaWYgKHNhbXBsZVBvc2l0aW9uIDwgdGhpcy5udW1TYW1wbGVzKSB7CiAgICAgICAgICAgIG91dHB1dHNbMF1bY2hdW3NdICs9IHRoaXMub3V0cHV0TGV2ZWwgKiB0aGlzLmxldmVsc1tpXSAqIHRoaXMuYnVmZmVyc1tpXVtjaF1bc2FtcGxlUG9zaXRpb25dOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmxldmVsc1tpXSA9IE1hdGgubWluKE1hdGgubWF4KDAsIHRoaXMubGV2ZWxzW2ldICsgdGhpcy5pbmNyZW1lbnRzW2ldKSwgMSk7CiAgICAgIH0KICAgICAgdGhpcy5vdXRwdXRMZXZlbCA9IE1hdGgubWluKE1hdGgubWF4KDAsIHRoaXMub3V0cHV0TGV2ZWwgKyB0aGlzLm91dHB1dExldmVsSW5jcmVtZW50KSwgMSk7CiAgICB9CiAgICB0aGlzLnBsYXloZWFkICs9IGJsb2NrU2l6ZTsKICAgIGlmICh0aGlzLmlzUGxheWluZykgewogICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoeyBwbGF5aGVhZDogdGhpcy5wbGF5aGVhZCB9KTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KfQoKcmVnaXN0ZXJQcm9jZXNzb3IoJ2F1ZGlvLWxhYi1taXhlcicsIEF1ZGlvTGFiTWl4ZXIpOwo=",import.meta.url)),this.mixerNode=new AudioWorkletNode($,"audio-lab-mixer",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2]}),this.mixerNode.connect($.destination),this.mixerNode.port.onmessage=e=>{"playhead"in e.data&&this.duration>0&&(this.playhead=e.data.playhead/this.duration)}}async setPreset(e){var s;const t=[this.getBuffer(e.audios.dry),this.getBuffer(e.audios.wet)];e.audios.delta&&t.push(this.getBuffer(e.audios.delta));const a=await Promise.all(t);this.duration=a[0].length,(s=this.mixerNode)==null||s.port.postMessage({type:"set_buffers",buffers:a.map(n=>[n.getChannelData(0),n.getChannelData(1)])})}setPresetState(e){var t;(t=this.mixerNode)==null||t.port.postMessage({type:"set_levels",levels:[e==="dry"?1:0,e==="wet"?1:0,e==="delta"?1:0]})}play(e){var t;(t=this.mixerNode)==null||t.port.postMessage({type:"play",position:e})}setPosition(e){var t;(t=this.mixerNode)==null||t.port.postMessage({type:"set_position",position:e})}stop(){var e;(e=this.mixerNode)==null||e.port.postMessage({type:"pause"})}async getBuffer(e){const a=await(await fetch(e)).arrayBuffer();return $.decodeAudioData(a)}}function at(i){if(!("AudioWorkletNode"in window))return null;const e=new Qe;let t;const[a,s]=q(0),[n,l]=Se({wasPlaying:!1,isPlaying:!1,presetIndex:0,presetState:"wet",loading:!0,loadingPlay:!1,startPosition:0}),d=K(()=>i.presets[n.presetIndex]);function c(r){l({startPosition:r}),t.currentTime=r*t.duration,n.isPlaying?e.play(r*t.duration):e.setPosition(r*t.duration)}async function f(){l({loadingPlay:!0}),await t.play(),e.play(n.startPosition*t.duration),l({isPlaying:!0,loadingPlay:!1})}async function g(){l({loadingPlay:!0}),t.currentTime=0,await t.play(),e.play(0),l({loadingPlay:!1})}async function I(){t.pause(),e.stop(),l({isPlaying:!1})}async function b(){$.state!=="running"&&($.resume(),$.currentTime),n.isPlaying?await I():await f()}function G(){const r=Object.keys(d().audios||{}).length;s(t.parentElement.getBoundingClientRect().width*(t.videoHeight/r)/t.videoWidth)}async function M(r){const u=Math.max(0,Math.min(i.presets.length-1,r)),h=n.isPlaying;await I(),l({wasPlaying:h,presetState:"wet",presetIndex:u,startPosition:0})}const m=()=>new Promise(r=>{const u=()=>{t.removeEventListener("loadeddata",u),r()};t.addEventListener("loadeddata",u),t.load()});E(()=>{e.setPresetState(n.presetState)}),E(async()=>{d()&&(l({loading:!0}),await Promise.all([e.setPreset(d()),m()]),t.currentTime=0,G(),l({loading:!1}),n.wasPlaying&&await f())});let w=!1;return E(()=>{n.isPlaying&&!w&&(w=!0,window.addEventListener("keydown",r=>{r.code==="Space"&&!n.loadingPlay&&(r.preventDefault(),r.stopPropagation(),b())}))}),ge(async()=>{await e.init(),e.setPresetState(n.presetState),window.addEventListener("resize",G)}),Me(()=>{window.removeEventListener("resize",G)}),[(()=>{var r=H(Ee),u=r.firstChild,h=u.nextSibling,p=h.firstChild,C=p.firstChild,y=C.firstChild,o=p.nextSibling,A=o.firstChild,[x,N]=R(A.nextSibling),z=x.nextSibling,[Z,ce]=R(z.nextSibling),ue=Z.nextSibling,[he,fe]=R(ue.nextSibling),Ie=o.nextSibling,[ee,Ce]=R(Ie.nextSibling),Y=ee.nextSibling,Ae=Y.firstChild,[te,me]=R(Ae.nextSibling),be=te.nextSibling,[ye,ve]=R(be.nextSibling),ie=Y.nextSibling,pe=ie.nextSibling;S(u,_(Be,{get each(){return i.presets},children:(v,V)=>(()=>{var W=H(Te);return W.$$click=()=>M(V()),S(W,()=>v.name),F(P=>{var k=n.loadingPlay,T=n.presetIndex===V();return k!==P.e&&J(W,"disabled",P.e=k),T!==P.t&&W.classList.toggle("active",P.t=T),P},{e:void 0,t:void 0}),j(),W})()}));var ne=t;return typeof ne=="function"?L(ne,C):t=C,C.addEventListener("ended",g),J(C,"controls",!1),S(o,_(Q,{get disabled(){return n.loadingPlay},buttonStyle:"secondary",style:"white-space: nowrap;",onClick:b,icon:!0,get children(){return[(()=>{var v=H(Ke),V=v.firstChild,W=V.nextSibling,[P,k]=R(W.nextSibling);return S(v,(()=>{var T=K(()=>!!n.isPlaying);return()=>T()?H(De):H(Fe)})(),P,k),v})(),K(()=>n.isPlaying?"Stop":"Play")]}}),x,N),S(o,_(le,{label:"bypass",onClick:()=>l({presetState:n.presetState==="dry"?"wet":"dry"}),get toggled(){return n.presetState==="dry"}}),Z,ce),S(o,(()=>{var v=K(()=>!!d().audios.delta);return()=>v()&&_(le,{label:"delta",onClick:()=>l({presetState:n.presetState==="delta"?"wet":"delta"}),get toggled(){return n.presetState==="delta"}})})(),he,fe),S(h,_(_e,{get startPosition(){return n.startPosition},setStartPosition:c,getPlayheadPosition:()=>e.playhead,audioCtx:$,get url(){return d().audios.dry}}),ee,Ce),S(Y,_(Q,{small:!0,buttonStyle:"secondary",get disabled(){return n.presetIndex===0||n.loadingPlay},onClick:()=>M(n.presetIndex-1),children:"Previous"}),te,me),S(Y,_(Q,{small:!0,buttonStyle:"secondary",get disabled(){return n.presetIndex===i.presets.length-1||n.loadingPlay},onClick:()=>M(n.presetIndex+1),children:"Next"}),ye,ve),S(ie,()=>d().name),F(v=>{var V=i.aspectRatio,W="translateY(".concat(n.presetState==="wet"?-a():n.presetState==="delta"?-a()*2:0,"px)"),P=d().video,k=d().description;return V!==v.e&&((v.e=V)!=null?p.style.setProperty("aspect-ratio",V):p.style.removeProperty("aspect-ratio")),W!==v.t&&((v.t=W)!=null?C.style.setProperty("transform",W):C.style.removeProperty("transform")),P!==v.a&&de(y,"src",v.a=P),k!==v.o&&J(pe,"innerHTML",v.o=k),v},{e:void 0,t:void 0,a:void 0,o:void 0}),r})(),(()=>{var r=H(Ye);return F(()=>r.classList.toggle("visible",!!n.loading)),r})()]}re(["click"]);export{qe as __vite_legacy_guard,at as default};
