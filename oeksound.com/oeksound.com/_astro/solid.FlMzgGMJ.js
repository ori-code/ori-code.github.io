const d={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Q(this.context.count)},getNextContextId(){return Q(this.context.count++)}};function Q(e){const t=String(e),r=t.length-1;return d.context.id+(r?String.fromCharCode(96+r):"")+t}function j(e){d.context=e}function de(){return{...d.context,id:d.getNextContextId(),count:0}}const he=(e,t)=>e===t,M=Symbol("solid-proxy"),J=typeof Proxy=="function",ge=Symbol("solid-track"),U={equals:he};let Z=oe;const E=1,R=2,ee={owned:null,cleanups:null,context:null,owner:null};var f=null;let V=null,pe=null,h=null,p=null,m=null,H=0;function D(e,t){const r=h,n=f,s=e.length===0,l=t===void 0?n:t,u=s?ee:{owned:null,cleanups:null,context:l?l.context:null,owner:l},o=s?e:()=>e(()=>k(()=>N(u)));f=u,h=null;try{return F(o,!0)}finally{h=r,f=n}}function X(e,t){t=t?Object.assign({},U,t):U;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=s=>(typeof s=="function"&&(s=s(r.value)),le(r,s));return[ue.bind(r),n]}function be(e,t,r){const n=B(e,t,!1,E);$(n)}function we(e,t,r){Z=ke;const n=B(e,t,!1,E),s=T&&re(T);s&&(n.suspense=s),(!r||!r.render)&&(n.user=!0),m?m.push(n):$(n)}function S(e,t,r){r=r?Object.assign({},U,r):U;const n=B(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,$(n),ue.bind(n)}function Ie(e){return F(e,!1)}function k(e){if(h===null)return e();const t=h;h=null;try{return e()}finally{h=t}}function Ne(e){we(()=>k(e))}function te(e){return f===null||(f.cleanups===null?f.cleanups=[e]:f.cleanups.push(e)),e}function $e(){return h}function ye(){return f}function Le(e,t){const r=f,n=h;f=e,h=null;try{return F(t,!0)}catch(s){G(s)}finally{f=r,h=n}}function xe(e){m.push.apply(m,e),e.length=0}function ne(e,t){const r=Symbol("context");return{id:r,Provider:Ae(r),defaultValue:e}}function re(e){let t;return f&&f.context&&(t=f.context[e.id])!==void 0?t:e.defaultValue}function se(e){const t=S(e),r=S(()=>Y(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let T;function ve(){return T||(T=ne())}function ue(){if(this.sources&&this.state)if(this.state===E)$(this);else{const e=p;p=null,F(()=>_(this),!1),p=e}if(h){const e=this.observers?this.observers.length:0;h.sources?(h.sources.push(this),h.sourceSlots.push(e)):(h.sources=[this],h.sourceSlots=[e]),this.observers?(this.observers.push(h),this.observerSlots.push(h.sources.length-1)):(this.observers=[h],this.observerSlots=[h.sources.length-1])}return this.value}function le(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&F(()=>{for(let s=0;s<e.observers.length;s+=1){const l=e.observers[s],u=V&&V.running;u&&V.disposed.has(l),(u?!l.tState:!l.state)&&(l.pure?p.push(l):m.push(l),l.observers&&ie(l)),u||(l.state=E)}if(p.length>1e6)throw p=[],new Error},!1)),t}function $(e){if(!e.fn)return;N(e);const t=H;me(e,e.value,t)}function me(e,t,r){let n;const s=f,l=h;h=f=e;try{n=e.fn(t)}catch(u){return e.pure&&(e.state=E,e.owned&&e.owned.forEach(N),e.owned=null),e.updatedAt=r+1,G(u)}finally{h=l,f=s}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?le(e,n):e.value=n,e.updatedAt=r)}function B(e,t,r,n=E,s){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:f,context:f?f.context:null,pure:r};return f===null||f!==ee&&(f.owned?f.owned.push(l):f.owned=[l]),l}function K(e){if(e.state===0)return;if(e.state===R)return _(e);if(e.suspense&&k(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<H);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===E)$(e);else if(e.state===R){const n=p;p=null,F(()=>_(e,t[0]),!1),p=n}}function F(e,t){if(p)return e();let r=!1;t||(p=[]),m?r=!0:m=[],H++;try{const n=e();return Se(r),n}catch(n){r||(m=null),p=null,G(n)}}function Se(e){if(p&&(oe(p),p=null),e)return;const t=m;m=null,t.length&&F(()=>Z(t),!1)}function oe(e){for(let t=0;t<e.length;t++)K(e[t])}function ke(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:K(n)}if(d.context){if(d.count){d.effects||(d.effects=[]),d.effects.push(...e.slice(0,r));return}j()}for(d.effects&&(d.done||!d.count)&&(e=[...d.effects,...e],r+=d.effects.length,delete d.effects),t=0;t<r;t++)K(e[t])}function _(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const s=n.state;s===E?n!==t&&(!n.updatedAt||n.updatedAt<H)&&K(n):s===R&&_(n,t)}}}function ie(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=R,r.pure?p.push(r):m.push(r),r.observers&&ie(r))}}function N(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const l=s.pop(),u=r.observerSlots.pop();n<s.length&&(l.sourceSlots[u]=n,s[n]=l,r.observerSlots[n]=u)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)N(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)N(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Oe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function G(e,t=f){throw Oe(e)}function Y(e){if(typeof e=="function"&&!e.length)return Y(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Y(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Ae(e,t){return function(n){let s;return be(()=>s=k(()=>(f.context={...f.context,[e]:n.value},se(()=>n.children))),void 0),s}}const Ce=Symbol("fallback");function z(e){for(let t=0;t<e.length;t++)e[t]()}function Pe(e,t,r={}){let n=[],s=[],l=[],u=0,o=t.length>1?[]:null;return te(()=>z(l)),()=>{let c=e()||[],g=c.length,a,i;return c[ge],k(()=>{let b,v,w,P,O,y,x,C,I;if(g===0)u!==0&&(z(l),l=[],n=[],s=[],u=0,o&&(o=[])),r.fallback&&(n=[Ce],s[0]=D(ae=>(l[0]=ae,r.fallback())),u=1);else if(u===0){for(s=new Array(g),i=0;i<g;i++)n[i]=c[i],s[i]=D(A);u=g}else{for(w=new Array(g),P=new Array(g),o&&(O=new Array(g)),y=0,x=Math.min(u,g);y<x&&n[y]===c[y];y++);for(x=u-1,C=g-1;x>=y&&C>=y&&n[x]===c[C];x--,C--)w[C]=s[x],P[C]=l[x],o&&(O[C]=o[x]);for(b=new Map,v=new Array(C+1),i=C;i>=y;i--)I=c[i],a=b.get(I),v[i]=a===void 0?-1:a,b.set(I,i);for(a=y;a<=x;a++)I=n[a],i=b.get(I),i!==void 0&&i!==-1?(w[i]=s[a],P[i]=l[a],o&&(O[i]=o[a]),i=v[i],b.set(I,i)):l[a]();for(i=y;i<g;i++)i in w?(s[i]=w[i],l[i]=P[i],o&&(o[i]=O[i],o[i](i))):s[i]=D(A);s=s.slice(0,u=g),n=c.slice(0)}return s});function A(b){if(l[i]=b,o){const[v,w]=X(i);return o[i]=w,t(c[i],v)}return t(c[i])}}}let ce=!1;function De(){ce=!0}function Ee(e,t){if(ce&&d.context){const r=d.context;j(de());const n=k(()=>e(t||{}));return j(r),n}return k(()=>e(t||{}))}function L(){return!0}const q={get(e,t,r){return t===M?r:e.get(t)},has(e,t){return t===M?!0:e.has(t)},set:L,deleteProperty:L,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:L,deleteProperty:L}},ownKeys(e){return e.keys()}};function W(e){return(e=typeof e=="function"?e():e)?e:{}}function je(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function Me(...e){let t=!1;for(let u=0;u<e.length;u++){const o=e[u];t=t||!!o&&M in o,e[u]=typeof o=="function"?(t=!0,S(o)):o}if(J&&t)return new Proxy({get(u){for(let o=e.length-1;o>=0;o--){const c=W(e[o])[u];if(c!==void 0)return c}},has(u){for(let o=e.length-1;o>=0;o--)if(u in W(e[o]))return!0;return!1},keys(){const u=[];for(let o=0;o<e.length;o++)u.push(...Object.keys(W(e[o])));return[...new Set(u)]}},q);const r={},n=Object.create(null);for(let u=e.length-1;u>=0;u--){const o=e[u];if(!o)continue;const c=Object.getOwnPropertyNames(o);for(let g=c.length-1;g>=0;g--){const a=c[g];if(a==="__proto__"||a==="constructor")continue;const i=Object.getOwnPropertyDescriptor(o,a);if(!n[a])n[a]=i.get?{enumerable:!0,configurable:!0,get:je.bind(r[a]=[i.get.bind(o)])}:i.value!==void 0?i:void 0;else{const A=r[a];A&&(i.get?A.push(i.get.bind(o)):i.value!==void 0&&A.push(()=>i.value))}}}const s={},l=Object.keys(n);for(let u=l.length-1;u>=0;u--){const o=l[u],c=n[o];c&&c.get?Object.defineProperty(s,o,c):s[o]=c?c.value:void 0}return s}function Ue(e,...t){if(J&&M in e){const s=new Set(t.length>1?t.flat():t[0]),l=t.map(u=>new Proxy({get(o){return u.includes(o)?e[o]:void 0},has(o){return u.includes(o)&&o in e},keys(){return u.filter(o=>o in e)}},q));return l.push(new Proxy({get(u){return s.has(u)?void 0:e[u]},has(u){return s.has(u)?!1:u in e},keys(){return Object.keys(e).filter(u=>!s.has(u))}},q)),l}const r={},n=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(e)){const l=Object.getOwnPropertyDescriptor(e,s),u=!l.get&&!l.set&&l.enumerable&&l.writable&&l.configurable;let o=!1,c=0;for(const g of t)g.includes(s)&&(o=!0,u?n[c][s]=l.value:Object.defineProperty(n[c],s,l)),++c;o||(u?r[s]=l.value:Object.defineProperty(r,s,l))}return[...n,r]}const fe=e=>"Stale read from <".concat(e,">.");function Re(e){const t="fallback"in e&&{fallback:()=>e.fallback};return S(Pe(()=>e.each,e.children,t||void 0))}function Te(e){const t=e.keyed,r=S(()=>e.when,void 0,{equals:(n,s)=>t?n===s:!n==!s});return S(()=>{const n=r();if(n){const s=e.children;return typeof s=="function"&&s.length>0?k(()=>s(t?n:()=>{if(!k(r))throw fe("Show");return e.when})):s}return e.fallback},void 0,void 0)}function Ke(e){let t=!1;const r=(l,u)=>(t?l[1]===u[1]:!l[1]==!u[1])&&l[2]===u[2],n=se(()=>e.children),s=S(()=>{let l=n();Array.isArray(l)||(l=[l]);for(let u=0;u<l.length;u++){const o=l[u].when;if(o)return t=!!l[u].keyed,[u,o,l[u]]}return[-1]},void 0,{equals:r});return S(()=>{const[l,u,o]=s();if(l<0)return e.fallback;const c=o.children;return typeof c=="function"&&c.length>0?k(()=>c(t?u:()=>{if(k(s)[0]!==l)throw fe("Match");return o.when})):c},void 0,void 0)}function _e(e){return e}const Fe=ne();function He(e){let t=0,r,n,s,l,u;const[o,c]=X(!1),g=ve(),a={increment:()=>{++t===1&&c(!0)},decrement:()=>{--t===0&&c(!1)},inFallback:o,effects:[],resolved:!1},i=ye();if(d.context&&d.load){const v=d.getContextId();let w=d.load(v);if(w&&(typeof w!="object"||w.status!=="success"?s=w:d.gather(v)),s&&s!=="$$f"){const[P,O]=X(void 0,{equals:!1});l=P,s.then(()=>{if(d.done)return O();d.gather(v),j(n),O(),j()},y=>{u=y,O()})}}const A=re(Fe);A&&(r=A.register(a.inFallback));let b;return te(()=>b&&b()),Ee(g.Provider,{value:a,get children(){return S(()=>{if(u)throw u;if(n=d.context,l)return l(),l=void 0;n&&s==="$$f"&&j();const v=S(()=>e.children);return S(w=>{const P=a.inFallback(),{showContent:O=!0,showFallback:y=!0}=r?r():{};if((!P||s&&s!=="$$f")&&O)return a.resolved=!0,b&&b(),b=n=s=void 0,xe(a.effects),v();if(y)return b?w:D(x=>(b=x,n&&(j({id:n.id+"F",count:0}),n=void 0),e.fallback),i)})})}})}export{M as $,Re as F,_e as M,Ke as S,we as a,Ee as b,X as c,be as d,S as e,Te as f,He as g,ge as h,$e as i,Ie as j,D as k,d as l,Me as m,te as n,Ne as o,De as p,ye as q,Le as r,Ue as s,k as u};
